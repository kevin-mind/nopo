name: web
description: React Router front-end for Nopo.
static_path: build/client

build:
  command: |
    pnpm install --frozen-lockfile
    pnpm exec react-router build
  env:
    NODE_ENV: production
runtime:
  cpu: "1"
  memory: "256Mi"
  port: 3000
  min_instances: 0
  max_instances: 10
  has_database: false
  run_migrations: false

commands:
  clean: rm -rf .react-router build node_modules
  dev: pnpm exec react-router dev --host
  start: pnpm exec react-router-serve ./build/server/index.js
  check:
    context: host
    commands:
      types: pnpm exec react-router typegen && pnpm exec tsc
  test: echo 'test'
