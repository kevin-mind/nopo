Review PR #{{PR_NUMBER}} for issue #{{ISSUE_NUMBER}}

Branch: `{{HEAD_REF}}` â†’ `{{BASE_REF}}`

## Previous Agent Notes

{{AGENT_NOTES}}

---

## Step 1: View Changes

```bash
git fetch origin main
git diff origin/main...HEAD --stat    # Summary
git diff origin/main...HEAD           # Full diff
```

## Step 2: Check Existing Comments

```bash
gh pr view {{PR_NUMBER}} --comments
```

## Step 3: Review the Code

Read changed files and check:
- Code quality and best practices
- Potential bugs or edge cases
- Test coverage
- Security considerations

### Edge Case Testing

Don't just check if todos are done - verify the LOGIC:

1. **Trace examples**: What happens with empty input? Common case? Boundaries?
2. **Test interactions**: If multiple options exist, what happens when combined?
3. **Run if possible**: Use CLI or tests to verify behavior
4. **Check design**: Does the implementation order make sense?

## Step 4: Make Your Decision

Return your review as structured output with:

- **decision**: One of:
  - `"approve"` - All requirements met, code is good
  - `"request_changes"` - Changes needed before merge
  - `"comment"` - Feedback but no blocking issues

- **body**: Your review summary explaining the decision

- **agent_notes** (optional): Key findings for future agents
