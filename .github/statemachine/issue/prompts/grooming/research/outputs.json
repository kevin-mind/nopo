{
  "type": "object",
  "properties": {
    "related_issues": {
      "type": "array",
      "description": "Related or duplicate issues found",
      "items": {
        "type": "object",
        "properties": {
          "number": { "type": "integer", "description": "Issue number" },
          "title": { "type": "string", "description": "Issue title" },
          "relationship": {
            "type": "string",
            "enum": ["duplicate", "related", "blocks", "blocked-by"],
            "description": "How this issue relates"
          },
          "status": {
            "type": "string",
            "enum": ["open", "closed"],
            "description": "Issue status"
          },
          "relevance": { "type": "string", "description": "Why this is relevant" }
        },
        "required": ["number", "title", "relationship", "status"]
      }
    },
    "related_prs": {
      "type": "array",
      "description": "Related PRs found",
      "items": {
        "type": "object",
        "properties": {
          "number": { "type": "integer", "description": "PR number" },
          "title": { "type": "string", "description": "PR title" },
          "status": {
            "type": "string",
            "enum": ["open", "merged", "closed"],
            "description": "PR status"
          },
          "relevance": { "type": "string", "description": "Why this is relevant" }
        },
        "required": ["number", "title", "status"]
      }
    },
    "related_discussions": {
      "type": "array",
      "description": "Related GitHub discussions",
      "items": {
        "type": "object",
        "properties": {
          "number": { "type": "integer", "description": "Discussion number" },
          "title": { "type": "string", "description": "Discussion title" },
          "relevance": { "type": "string", "description": "Why this is relevant" }
        },
        "required": ["number", "title"]
      }
    },
    "prior_art": {
      "type": "object",
      "description": "Previous attempts or similar work",
      "properties": {
        "attempted_before": {
          "type": "boolean",
          "description": "Has this been attempted before?"
        },
        "summary": {
          "type": "string",
          "description": "Summary of prior attempts and outcomes"
        },
        "lessons": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Lessons learned from prior work"
        }
      },
      "required": ["attempted_before"]
    },
    "codebase_context": {
      "type": "array",
      "description": "Key files or modules relevant to this work",
      "items": {
        "type": "object",
        "properties": {
          "path": { "type": "string", "description": "File or module path" },
          "relevance": { "type": "string", "description": "Why this is relevant" }
        },
        "required": ["path", "relevance"]
      }
    },
    "context_summary": {
      "type": "string",
      "description": "Brief summary of research findings for the summary agent"
    }
  },
  "required": ["context_summary"]
}
