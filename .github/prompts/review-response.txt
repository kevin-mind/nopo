Address review feedback on PR #{{PR_NUMBER}}

Reviewer: @{{REVIEWER}}
Decision: {{REVIEW_DECISION}}
Branch: `{{HEAD_REF}}`

## Previous Agent Notes

{{AGENT_NOTES}}

---

## Step 1: Get Review Comments

```bash
gh api /repos/{{REPO_OWNER}}/{{REPO_NAME}}/pulls/{{PR_NUMBER}}/comments
gh pr view {{PR_NUMBER}} --comments
```

## Step 2: Process Feedback

**For each comment:**

- **Change request**: Make the fix, commit, reply noting the fix
- **Question**: Answer with a reply comment; make change if implied

## Step 3: Finalize

**If you made commits:**
```bash
git push origin {{HEAD_REF}}
```
Push converts PR to draft and triggers CI. CI-pass marks it ready.

**If no commits (only discussion):**
```bash
gh pr comment {{PR_NUMBER}} --body "## Review Response

<summary of analysis and actions taken>"

gh pr edit {{PR_NUMBER}} --add-reviewer "nopo-bot"
```

## Rules

- Address ALL feedback
- Atomic commits for each change
- Always post a summary comment
- Follow CLAUDE.md guidelines

## Save Notes for Future Agents

Before finishing, save any important context by writing to `/tmp/claude-notes.json`:

```json
{
  "issue_number": {{ISSUE_NUMBER}},
  "run_id": 0,
  "timestamp": "",
  "agent": "review-response",
  "phase": 0,
  "notes": [
    "Note 1: Key change made in response to feedback"
  ]
}
```
