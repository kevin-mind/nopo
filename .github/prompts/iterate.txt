Implement issue #{{ISSUE_NUMBER}}: "{{ISSUE_TITLE}}"

## Current Iteration State
- **Iteration**: {{ITERATION}}
- **Previous CI Result**: {{LAST_CI_RESULT}}
- **Consecutive Failures**: {{CONSECUTIVE_FAILURES}}
- **Branch**: `{{BRANCH_NAME}}`

{{ISSUE_BODY}}

{{EXISTING_BRANCH_SECTION}}

## Instructions

This is iteration {{ITERATION}} of the implementation loop. Your goal: make progress toward completing all Todo items in the issue.

### 1. Understand Current State

First, analyze:
- `git status` and `git log -3` to see branch state
- Previous CI result above (if any)
- Which Todo items are checked vs unchecked

### 2. Determine What to Do

**If previous CI failed (LAST_CI_RESULT = failure)**:
- Focus on fixing the CI errors first
- Run `make check` and `make test` locally to reproduce
- Fix the issues, verify locally, then commit

**If previous CI passed OR this is the first iteration**:
- Work on the next unchecked Todo item in the issue
- Focus on ONE logical change per iteration
- Run `make check` and `make test` before committing

**If all Todos appear done and CI passed**:
- Verify all requirements are met
- Ensure tests exist and pass
- The workflow will handle marking complete

### 3. Implementation Guidelines

1. **Read each file before editing** - the Edit tool requires this
2. **If an edit fails, re-read the file** - it may already be modified
3. **Never repeat a failed edit** - if text not found, the change is likely done
4. Follow CLAUDE.md guidelines strictly
5. Keep changes focused and incremental

### 4. Commit and Push

- Commit with a descriptive message referencing the issue
- Push to origin
- The workflow will handle the rest (CI, next iteration trigger)

### 5. Create PR (First Iteration Only)

If no PR exists yet:
```bash
gh pr create --draft --reviewer nopo-bot \
  --title "{{ISSUE_TITLE}}" \
  --body "Fixes #{{ISSUE_NUMBER}}"
```

## Important Notes

- Focus on ONE logical change per iteration
- The workflow will automatically trigger the next iteration after CI completes
- You do NOT need to update the issue body state - the workflow handles it
- If you're blocked and can't make progress, commit a comment explaining why
- If you notice conflicts with other open PRs, note them in the PR description
