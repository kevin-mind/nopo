{
  "name": "circuit-breaker",
  "description": "CI fails MAX_RETRIES times, triggers circuit breaker - NOTE: This is a dry-run only test that verifies the state machine logic",
  "job_type": "issue-iterate",
  "trigger": "workflow_run_completed",
  "trigger_context": {
    "ci_result": "failure"
  },
  "e2e_outcomes": {
    "ci": ["failure", "failure", "failure", "failure", "failure"],
    "release": ["success"],
    "review": ["approved"]
  },
  "parent_issue": {
    "title": "Feature with persistent CI failures",
    "body": "## Description\n\nA feature that will repeatedly fail CI and trigger the circuit breaker.\n\n## Requirements\n\n- This is expected to fail and block\n\n## Acceptance Criteria\n\n- [ ] Circuit breaker triggers after max failures\n- [ ] nopo-bot is unassigned",
    "labels": [],
    "project_fields": {
      "Status": "Backlog",
      "Iteration": 0,
      "Failures": 0
    }
  },
  "dry_run_override": {
    "iteration": 4,
    "failures": 4,
    "status": "In progress"
  },
  "expected": {
    "parent_status": "Blocked",
    "issue_state": "open",
    "failures": 5
  },
  "expected_machine": {
    "final_state": "blocked",
    "contains_actions": ["recordFailure", "setBlocked", "unassign"],
    "stopped_early": "true",
    "stop_reason": "blocked"
  },
  "timeout": 120,
  "poll_interval": 10
}
