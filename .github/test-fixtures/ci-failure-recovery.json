{
  "name": "ci-failure-recovery",
  "description": "CI fails once, then passes - verifies failure count increments and resets after triage creates sub-issues",
  "job_type": "issue-iterate",
  "trigger": "issue_assigned",
  "parent_issue": {
    "title": "Feature with recoverable CI failure",
    "body": "## Description\n\nA feature that will initially fail CI but can be fixed.\n\n## Requirements\n\n- Implement feature\n- Fix any CI failures\n\n## Acceptance Criteria\n\n- [ ] CI passes after fix\n- [ ] Failures count resets to 0",
    "labels": [],
    "project_fields": {
      "Status": "Backlog",
      "Iteration": 0,
      "Failures": 0
    }
  },
  "expected": {
    "parent_status": "Done",
    "issue_state": "closed",
    "min_iteration": 2,
    "failures": 0,
    "all_sub_issues_closed": true,
    "triage": {
      "labels": ["triaged"],
      "project_fields": {
        "Status": "Backlog"
      },
      "sub_issue_count": 1
    },
    "phases": [
      {
        "branch_pattern": "claude/issue/.*/phase-.*",
        "ci_required": true,
        "review_required": true
      }
    ],
    "completion": {
      "parent_status": "Done",
      "all_sub_issues_closed": true,
      "all_prs_merged": true
    }
  },
  "expected_machine": {
    "final_state": "iterating",
    "contains_actions": ["incrementIteration", "runClaude"],
    "stopped_early": "true",
    "stop_reason": "run_claude_executed"
  },
  "timeout": 600,
  "poll_interval": 15
}
